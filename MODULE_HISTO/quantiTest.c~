#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include "histogram.h"

void testColorFreqIter() {
	int* tabColor=calloc(3,sizeof(int));
	int compteurCouleurs=0;
	int bleuPrecedent=0;
	int freq;
	histo histogram = create_histo();
	image img = FAIRE_image();
	char *nomImage = "../IMAGES/deg.ppm";
	histo_iter h_iter;

	image_charger(img,nomImage);
	init_histo(histogram, img);
	h_iter = create_histo_iter(histogram);

	/* deg.ppm est une image 256*256 avec un degradé (0,255,255) vers (255,255,255) avec un pas de 1 pour R
	On doit donc avoir une liste R={0..255} et freq=256 par couleur car il y a une teinte de bleu par ligne */

	do {
		give_color_histo_iter(h_iter, tabColor);
		freq = give_freq_histo_iter(h_iter);
		if (tabColor[1]==tabColor[2] && tabColor[0]==compteurCouleurs && freq==256) {
			compteurCouleurs++;
		}

	}
	while(next_histo_iter(h_iter));
	assert(compteurCouleurs==255);
	printf("-> L'obtention de la couleur et de la fréquence de l'élément courant de l'itérateur se font correctement\n");
}



int main() {
	printf("\nTESTS RELATIFS AUX LISTES\n");
	testList();
	printf("\n");
	return 0;
}
